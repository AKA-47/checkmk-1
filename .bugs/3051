Title: Bakery: New host does not have an agent by default
Component: wato
State: open
Date: 2017-12-20 11:21:26
Targetversion: 1.5.0
Class: bug

When using the agent bakery, e.g. only with the VANILLA and GENERIC agent and a new host is being added to the
monitoring, the bakery does not find an agent for this new host.

The "host agent" page is also showing no agent:

http://localhost/heute/check_mk/wato.py?folder=&host=localhost&mode=agent_of_host#

This seems to be caused by the agent_bakery.find_agents_of_host function which assumes that the hosts can be
matched explicitly by the stored agent configs.

Since the new host was not available during last baking, the host is not listed in the agent configs and no
agent is matching.

How to solve this?

Idea #1: Mark the bakery dirty on new / renamed hosts?
Idea #2: Change agent_bakery.find_agents_of_host to match at least the GENERIC agent for these hosts?
