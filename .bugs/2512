Title: failed service discovery in rare situations
Component: checks
State: open
Date: 2017-07-04 15:21:44
Targetversion: 1.5.0
Class: bug

Situation:
In rare situation the service discovery will fail and discover no new snmp checks. Even if these are correctly implemented and the services are discovered on a different check_mk site.
This behaviour is rare and possibly hard to reproduce. Several different forms has been discovered:
1. Services are not discovered on commandline (cmk -IIv hostname) but in WATO Service Discovery.
2. Services are not discovered on cmd and not in WATO Service Discovery. The Discovery Check of the hosts see the missing services.
3. Nothing is discovered except forcing the check plugin with --checks=pluginname

In some cases a workaround can be to discover the services in WATO. After that the discovery on cmd is working again. This is not working all the time.

To reproduce the first occurance of this bug:

cmk --flush hostname
cmk -IIv

There is no known way to reproduce the third occurance nor to get it working again.
