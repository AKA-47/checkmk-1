def NODE
withFolderProperties{
    NODE = env.BUILD_NODE
}

properties([
  buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '7', numToKeepStr: '14')),
])

node (NODE) {
    stage('checkout sources') {
        checkout(scm)
        integration = load 'buildscripts/scripts/lib/integration.groovy'
    }

    integration.build(
        DISTRO_LIST: ["ubuntu-19.04"],
        EDITION: "cee",
        VERSION: "git",
        MAKE_TARGET: "test-gui-crawl-docker",
    )
}
